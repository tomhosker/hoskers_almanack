\usepackage[
    a5paper,
    hmargin=15mm,
    vmargin=15mm,
    marginparwidth=15mm,
    marginparsep=3mm
]{geometry}

\usepackage{
    enumitem,
    footmisc,
    caption,
    color,
    fancyhdr,
    fourier-orns,
    marginnote,
    microtype,
    pifont,
    verse,
    xfrac
}

% Sort out fonts.
\usepackage{fontspec}
\usepackage[T1]{fontenc}
\newfontfamily\hoskeroe{English Towne}
\newfontfamily\greekish{CMU Serif}
\newfontfamily\arabicish{KacstQurn}
\setmainfont[
    ItalicFont=cmunti.otf,
    BoldFont=cmunbx.otf,
    BoldItalicFont=cmunbi.otf,
    Numbers=OldStyle
]{cmunrm.otf}

% Sort out BibTex.
\usepackage[backend=bibtex, style=authortitle, citestyle=authortitle]{biblatex}
\addbibresource{sources.bib}

% For Arabic text inside left-to-right text.
\newcommand{\textarabic}[1]{\bgroup\textdir TRT\arabicish #1\egroup}

% Fix fractions.
\usepackage{xfrac}
\DeclareInstance{xfrac}{cmunrm.otf(0)}{text}{
    slash-symbol-font = ptm,
    scale-factor=0.8,
    numerator-top-sep = 0pt,
    denominator-bot-sep = 0pt,
    slash-right-kern=-.25em,
    slash-left-kern=-.3em
}

% Set up division headings.
\usepackage[compact]{titlesec}
\renewcommand\thechapter{\Roman{chapter}}
\renewcommand\thesection{\arabic{section}}
\renewcommand\thesubsection{\thesection{\articlesymbol{subsection}}}
\titleformat{\chapter} % command
    [display] % shape
    {\centering} % format
    {\textsc{Month \thechapter}} % label
    {0.5ex} % sep
    {
        \vspace{1ex}
        \centering
        \huge
        \bfseries
    } % before code
\titleformat{\section}
    [hang] % shape
    {\centering\normalfont\bfseries\LARGE} % format
    {\thesection} % label
    {0em} % sep
    {} % before code
\titleformat{\subsection}
    [runin] % shape
    {\normalfont\bfseries} % format
    {\thesubsection} % label
    {0.5em} % sep
    {} % before code

% Page break stuff.
\makeatletter
\@beginparpenalty=10000
\makeatother

% Standardise the manner in which books, poems, etc are referenced.
\newcommand{\refbook}[1]{\textit{#1}}
\newcommand{\refpoem}[1]{``#1''}

% Always call the hyperref package last.
\usepackage[hidelinks]{hyperref}
